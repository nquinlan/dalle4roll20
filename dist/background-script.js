chrome.runtime.onMessage.addListener((function(e,o,n){if(chrome.runtime.id!==o.id)return!1;var r;"getFileUrlFromUrl"===e.method&&(e=>fetch(e.url).then((e=>e.blob())).then((e=>{return new FileReader,o=e,new Promise((e=>{let n=new FileReader;n.onload=e,n.readAsDataURL(o)})).then((e=>e.target.result));var o})))(e.options).then((e=>{console.log(e),n(e)})),"download"===e.method&&(r=e.options,chrome.downloads.download({url:r.url,filename:r.filename})).then((e=>{console.log(e),n(e)}))}));